<%- include('../partials/header', { 
    pageTitle: "RSVP'd Events", 
    bootstrap: '../../css/bootstrap.min.css', 
    fontAwesome: '../../css/font-awesome.css', 
    carousal: '../../css/owl-carousel.css', 
    tooplate: '../../css/tooplate-artxibition.css' 
}) %>

<!-- ***** About Us Page ***** -->
<div class="page-heading-shows-events">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h2>RSVP Now!</h2>
                <span>Check out upcoming and past shows & events and RSVP right now.</span>
            </div>
        </div>
    </div>
</div>

<div class="container mt-5">
    <h2 class="text-center">My RSVP'd Events</h2>
    <table class="table table-bordered mt-4">
        <thead>
            <tr>
                <th>Title</th>
                <th>Date</th>
                <th>Location</th>
                <th>Max Attendees</th>
                <th>Ratings and Comments</th>
            </tr>
        </thead>
        <tbody>
            <% if (events.length === 0) { %>
                <tr>
                    <td colspan="5" class="text-center">You have not RSVP'd to any events.</td>
                </tr>
            <% } else { %>
                <% events.forEach(event => { %>
                    <tr>
                        <td><%= event.title %></td>
                        <td><%= new Date(event.eventDate).toDateString() %></td>
                        <td><%= event.location %></td>
                        <td><%= event.maxAttendees %></td>
                        <td>
                            <form id="ratingForm" action="/user/events/<%=event._id%>/rate" method="post">
                                <label for="rating">Rate this event (1-5):</label>
                                <input type="number" id="rating" name="rating" min="1" max="5" required>
                                <label for="comment">Leave a comment:</label>
                                <textarea id="comment" name="comment"></textarea>
                                <button type="submit">Submit Rating</button>
                            </form>                            
                        </td>
                    </tr>
                <% }); %>
            <% } %>
        </tbody>
    </table>
</div>

<%- include('../partials/footer') %>

<!-- jQuery -->
<script src="../../scripts/jquery-2.1.0.min.js"></script>

<!-- Bootstrap -->
<script src="../../scripts/popper.js"></script>
<script src="../../scripts/bootstrap.min.js"></script>

<!-- Plugins -->
<script src="../../scripts/scrollreveal.min.js"></script>
<script src="../../scripts/waypoints.min.js"></script>
<script src="../../scripts/jquery.counterup.min.js"></script>
<script src="../../scripts/imgfix.min.js"></script> 
<script src="../../scripts/mixitup.js"></script> 
<script src="../../scripts/accordions.js"></script>
<script src="../../scripts/owl-carousel.js"></script>

<!-- Global Init -->
<script src="../../scripts/custom.js"></script>


</body>
</html>
